{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\nformEl: document.querySelector('.js-search-form'),\n    imgEl: document.querySelector('.js-image-container'),\n    loader: document.querySelector('.loader'),\n};\n\nfunction showLoader() {\n     refs.loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n\n     refs.loader.classList.add('hidden');\n}\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n    showLoader();\n\n    const query = e.target.elements.text.value; \n\n    getImg(query).then(data => {\n        renderImg(data);\n        if (data.hits.length === 0) {\n            throw new Error('No images found');\n        }\n         renderImg(data);\n            e.target.elements.text.value = '';\n})\n        .catch(error => {\n            iziToast.error({\n               position: \"topRight\",\n               message: 'An error occurred while loading images. Please try again later.',\n            });\n        })\n        .finally(() => {\n            hideLoader(); \n        });\n}\n\n// Функція, запит на сервер\n\nfunction getImg(imgEl) {\n\n    const BASE_URL = 'https://pixabay.com/api/';\n    \n    const PARAMS = new URLSearchParams({\n        key: '42120259-494341598d0c2875f9db82d6d',\n        q: imgEl,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n    \n\n    const url = `${BASE_URL}?${PARAMS.toString()}`;\n    \n    const options = {\n        headers: {\n            API_KEY: '42120259-494341598d0c2875f9db82d6d',\n        },\n    };\n\n   return fetch(url).then(response=>response.json());\n}\n\n//Функція розмітки\n\nfunction imgTemplate(photo) {\n    return `\n  <div class=\"photo-container\">\n     <a class=\"gallery-link\" href=\"${photo.largeImageURL}\" data-lightbox=\"image\">  <img\n      src=\"${photo.webformatURL}\"\n      alt=\"${photo.tags}\"\n      class=\"photo\"\n    />  </a>\n    \n    <div class=\"photo-body\">\n    <p class=\"photo-name\">Likes ${photo.likes}</p>\n    <p class=\"photo-name\">Views ${photo.views}</p>\n    <p class=\"photo-name\">Comments ${photo.comments}</p>\n    <p class=\"photo-name\">Downloads ${photo.downloads}</p>\n  </div>\n  </div>\n`;\n    \n}\n\nconst options = {\n  captionsData: 'alt',\n    captionDelay: 250, // Затримка в мілісекундах\n};\n\nlet lightBox = new SimpleLightbox('.gallery-link', options);\n\nfunction renderImg(data) {\n    const imagesMarkup = data.hits.map(img => imgTemplate(img)).join('');\n    refs.imgEl.innerHTML = imagesMarkup;\n    lightBox.refresh();\n\n}"],"names":["refs","showLoader","hideLoader","onFormSubmit","e","query","getImg","data","renderImg","error","iziToast","imgEl","BASE_URL","PARAMS","url","response","imgTemplate","photo","options","lightBox","SimpleLightbox","imagesMarkup","img"],"mappings":"6vBAMA,MAAMA,EAAO,CACb,OAAQ,SAAS,cAAc,iBAAiB,EAC5C,MAAO,SAAS,cAAc,qBAAqB,EACnD,OAAQ,SAAS,cAAc,SAAS,CAC5C,EAEA,SAASC,GAAa,CACjBD,EAAK,OAAO,UAAU,OAAO,QAAQ,CAC1C,CAEA,SAASE,GAAa,CAEjBF,EAAK,OAAO,UAAU,IAAI,QAAQ,CACvC,CAEAA,EAAK,OAAO,iBAAiB,SAAUG,CAAY,EAEnD,SAASA,EAAaC,EAAG,CACrBA,EAAE,eAAc,EAChBH,IAEA,MAAMI,EAAQD,EAAE,OAAO,SAAS,KAAK,MAErCE,EAAOD,CAAK,EAAE,KAAKE,GAAQ,CAEvB,GADAC,EAAUD,CAAI,EACVA,EAAK,KAAK,SAAW,EACrB,MAAM,IAAI,MAAM,iBAAiB,EAEpCC,EAAUD,CAAI,EACXH,EAAE,OAAO,SAAS,KAAK,MAAQ,EAC3C,CAAC,EACQ,MAAMK,GAAS,CACZC,EAAS,MAAM,CACZ,SAAU,WACV,QAAS,iEACxB,CAAa,CACb,CAAS,EACA,QAAQ,IAAM,CACXR,GACZ,CAAS,CACT,CAIA,SAASI,EAAOK,EAAO,CAEnB,MAAMC,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAGKG,EAAM,GAAGF,KAAYC,EAAO,SAAU,IAQ7C,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAUA,EAAS,KAAI,CAAE,CACnD,CAIA,SAASC,EAAYC,EAAO,CACxB,MAAO;AAAA;AAAA,qCAE0BA,EAAM;AAAA,aAC9BA,EAAM;AAAA,aACNA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,kCAKeA,EAAM;AAAA,kCACNA,EAAM;AAAA,qCACHA,EAAM;AAAA,sCACLA,EAAM;AAAA;AAAA;AAAA,CAK5C,CAEA,MAAMC,EAAU,CACd,aAAc,MACZ,aAAc,GAClB,EAEA,IAAIC,EAAW,IAAIC,EAAe,gBAAiBF,CAAO,EAE1D,SAASV,EAAUD,EAAM,CACrB,MAAMc,EAAed,EAAK,KAAK,IAAIe,GAAON,EAAYM,CAAG,CAAC,EAAE,KAAK,EAAE,EACnEtB,EAAK,MAAM,UAAYqB,EACvBF,EAAS,QAAO,CAEpB"}