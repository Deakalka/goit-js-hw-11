{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n    formEl: document.querySelector('.js-search-form'),\n    imgEl: document.querySelector('.js-image-container'),\n    loader: document.querySelector('.loader'),\n};\n\nfunction showLoader() {\n    refs.loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n    refs.loader.classList.add('hidden');\n}\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n\n    const query = e.target.elements.text.value.trim();\n\n    if (!query) {\n        iziToast.warning({\n            position: \"topRight\",\n            message: 'Please enter a search query.',\n        });\n        return;\n    }\n\n    showLoader();\n\n    getImg(query)\n        .then(data => {\n            if (data.hits.length === 0) {\n                iziToast.warning({\n                    position: \"topRight\",\n                    message: 'Unfortunately, no images were found matching your query. Please try again!',\n                });\n            } else {\n                renderImg(data);\n            }\n        })\n        .catch(error => {\n            iziToast.error({\n                position: \"topRight\",\n                message: 'An error occurred while loading images. Please try again later.',\n            });\n        })\n        .finally(() => {\n            hideLoader();\n        });\n}\n\nfunction getImg(imgEl) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const PARAMS = new URLSearchParams({\n        key: '42435331-5518aafb74583ec5494003d9b',\n        q: imgEl,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n\n    const url = `${BASE_URL}?${PARAMS.toString()}`;\n    \n    return fetch(url).then(response => response.json());\n}\n\nfunction imgTemplate(photo) {\n    return `\n    <div class=\"photo-container\">\n        <a class=\"gallery-link\" href=\"${photo.largeImageURL}\" data-lightbox=\"image\">\n            <img src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" class=\"photo\" />\n        </a>\n        \n        <div class=\"photo-body\">\n            <p class=\"photo-name\">Likes ${photo.likes}</p>\n            <p class=\"photo-name\">Views ${photo.views}</p>\n            <p class=\"photo-name\">Comments ${photo.comments}</p>\n            <p class=\"photo-name\">Downloads ${photo.downloads}</p>\n        </div>\n    </div>\n    `;\n}\n\nconst options = {\n    captionsData: 'alt',\n    captionDelay: 250,\n};\n\nlet lightBox = new SimpleLightbox('.gallery-link', options);\n\nfunction renderImg(data) {\n    const imagesMarkup = data.hits.map(img => imgTemplate(img)).join('');\n    refs.imgEl.innerHTML = imagesMarkup;\n    lightBox.refresh();\n}\n"],"names":["refs","showLoader","hideLoader","onFormSubmit","e","query","iziToast","getImg","data","renderImg","error","imgEl","BASE_URL","PARAMS","url","response","imgTemplate","photo","options","lightBox","SimpleLightbox","imagesMarkup","img"],"mappings":"6vBAKA,MAAMA,EAAO,CACT,OAAQ,SAAS,cAAc,iBAAiB,EAChD,MAAO,SAAS,cAAc,qBAAqB,EACnD,OAAQ,SAAS,cAAc,SAAS,CAC5C,EAEA,SAASC,GAAa,CAClBD,EAAK,OAAO,UAAU,OAAO,QAAQ,CACzC,CAEA,SAASE,GAAa,CAClBF,EAAK,OAAO,UAAU,IAAI,QAAQ,CACtC,CAEAA,EAAK,OAAO,iBAAiB,SAAUG,CAAY,EAEnD,SAASA,EAAaC,EAAG,CACrBA,EAAE,eAAc,EAEhB,MAAMC,EAAQD,EAAE,OAAO,SAAS,KAAK,MAAM,OAE3C,GAAI,CAACC,EAAO,CACRC,EAAS,QAAQ,CACb,SAAU,WACV,QAAS,8BACrB,CAAS,EACD,MACH,CAEDL,IAEAM,EAAOF,CAAK,EACP,KAAKG,GAAQ,CACNA,EAAK,KAAK,SAAW,EACrBF,EAAS,QAAQ,CACb,SAAU,WACV,QAAS,4EAC7B,CAAiB,EAEDG,EAAUD,CAAI,CAE9B,CAAS,EACA,MAAME,GAAS,CACZJ,EAAS,MAAM,CACX,SAAU,WACV,QAAS,iEACzB,CAAa,CACb,CAAS,EACA,QAAQ,IAAM,CACXJ,GACZ,CAAS,CACT,CAEA,SAASK,EAAOI,EAAO,CACnB,MAAMC,EAAW,2BACXC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAEKG,EAAM,GAAGF,KAAYC,EAAO,SAAU,IAE5C,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAYA,EAAS,KAAI,CAAE,CACtD,CAEA,SAASC,EAAYC,EAAO,CACxB,MAAO;AAAA;AAAA,wCAE6BA,EAAM;AAAA,wBACtBA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA;AAAA,0CAIhBA,EAAM;AAAA,0CACNA,EAAM;AAAA,6CACHA,EAAM;AAAA,8CACLA,EAAM;AAAA;AAAA;AAAA,KAIpD,CAEA,MAAMC,EAAU,CACZ,aAAc,MACd,aAAc,GAClB,EAEA,IAAIC,EAAW,IAAIC,EAAe,gBAAiBF,CAAO,EAE1D,SAAST,EAAUD,EAAM,CACrB,MAAMa,EAAeb,EAAK,KAAK,IAAIc,GAAON,EAAYM,CAAG,CAAC,EAAE,KAAK,EAAE,EACnEtB,EAAK,MAAM,UAAYqB,EACvBF,EAAS,QAAO,CACpB"}